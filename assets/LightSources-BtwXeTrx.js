import{H as p,r as m,A as f,F,D as b,j as e,K as y,L as A,S as g,T as C,B as I,J as L}from"./index-COEmp62u.js";import{b as k,d as _,e as B,A as E,g as H,M,j as O,m as T,h as w}from"./AutoSubmit-CFr04VNH.js";import{a as D,A as G,G as x,L as J}from"./LightSourceForm-BADexdXM.js";let N=[];for(let t in localStorage)if(t.startsWith("__state_"))try{N.push(JSON.parse(localStorage.getItem(t)))}catch{localStorage.removeItem(t)}const z=()=>{const{t}=p(),[r,s]=m.useState(),{floorId:S}=f(),n=m.useContext(F),i=b(S??"");if(!i)return"No floor ?";const c=r??0;return e.jsx(y,{children:e.jsx(k,{initialValues:i,onSubmit:o=>n==null?void 0:n.onChange(o),validationSchema:_.toFormikValidationSchema(w),validateOnChange:!0,validateOnMount:!0,children:({values:o,getFieldMeta:u})=>{var d;return e.jsxs(B,{children:[e.jsx(E,{}),e.jsx(H,{}),e.jsx(M,{fullScreen:!0,title:t("light_source.modal.title",{name:(d=o==null?void 0:o.lightSources[r])==null?void 0:d.name}),open:r!==void 0&&!!(o!=null&&o.lightSources[r]),onClose:()=>s(void 0),children:e.jsx(O,{name:`lightSources.${c}`,children:l=>e.jsx(D,{...l,image:i.base64},o.lightSources[c].id)})}),e.jsx(A,{sx:{margin:"1rem 0"},severity:"info",children:t("floor.light_source.list.description")}),e.jsx(T,{name:"lightSources",render:({push:l,remove:j})=>e.jsxs(g,{spacing:2,children:[e.jsxs(g,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(C,{variant:"subtitle1",children:t("floor.light_source.list")}),e.jsx(I,{variant:"contained",onClick:()=>{l({id:L(),polygon:[],name:"",border:25,color:[255,255,255,0],radius:5,shadowRelease:1}),s(o.lightSources.length)},children:e.jsx(G,{})})]}),e.jsx(x,{container:!0,spacing:2,children:o.lightSources.map((h,a)=>e.jsx(x,{size:{xs:6,sm:6,md:4,lg:3},sx:{maxHeight:"20vh",border:u(`lightSources.${a}`).error?"1px solid red":"none"},onClick:()=>s(a),children:e.jsx(J,{image:i.base64,lightSource:h,onDelete:()=>{r===a&&s(void 0),j(a)}})},h.id))})]})})]})}})})};export{z as LightSources};
